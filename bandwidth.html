<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Connected Devices</title>
<style>
body { 
  margin:0; 
  font-family: Arial, sans-serif; 
  background: var(--bg-color); 
  color: var(--text-color);
}

/* هدر بالا */
header { 
  background:#f26522; 
  color:#fff; 
  padding:15px 20px; 
  display:flex; 
  justify-content:space-between; 
  align-items:center; 
  position:sticky; 
  top:0; 
  z-index:1000; 
}
header .title { font-style: italic; font-weight:bold; }
header .menu-toggle { cursor:pointer; font-size:24px; }
header .theme-toggle { cursor:pointer; font-size:20px; margin-left:10px; }

/* منو */
/* منو */
nav { 
  position:fixed; 
  top:50px; 
  right:-100%; 
  width:70%; 
  max-width:250px; 
  height:calc(100vh - 50px); 
  background: var(--card-bg);  /* به جای رنگ ثابت */
  box-shadow:-5px 0 15px rgba(0,0,0,0.1); 
  transition:right 0.3s; 
  overflow-y:auto; 
  z-index:1000; 
  border-left:1px solid var(--border-color); /* به جای رنگ ثابت */
  color: var(--text-color);
}
nav.active { right:0; }
nav ul { list-style:none; padding:0; margin:0; }
nav ul li { 
  padding:15px 20px; 
  border-bottom:1px solid var(--border-color); /* به جای رنگ ثابت */
  cursor:pointer; 
}
nav ul li a { 
  text-decoration:none; 
  color: var(--text-color); /* به جای رنگ ثابت */
}
nav ul li:hover { 
  background: var(--bg-color); /* هماهنگ با تم */
}

nav.active { right:0; }
nav ul { list-style:none; padding:0; margin:0; }
nav ul li { padding:15px 20px; border-bottom:1px solid #ddd; cursor:pointer; }
nav ul li a { text-decoration:none; color:#333; }
nav ul li:hover { background:#f2f2f2; }

/* محتوای اصلی */
.container { padding:20px; margin-top:10px; }
.device-count { font-style: italic; margin-bottom:10px; }
.box { 
  background: var(--card-bg); 
  border: 1px solid var(--border-color);
  border-radius:12px; 
  padding:15px; 
  margin-bottom:20px; 
  box-shadow:0 2px 6px rgba(0,0,0,0.1); 
}
.device { display:flex; flex-direction:column; padding:10px; border-bottom:1px solid #eee; }
.device:last-child { border-bottom:none; }
.device-header { display:flex; justify-content:space-between; align-items:center; flex-wrap:wrap; gap:5px; }
.device-name { font-weight:bold; }
.device-ip { font-size:12px; color:#555; margin-top:4px; }
.actions { display:flex; flex-wrap:wrap; gap:5px; }
.actions button { padding:4px 8px; border:none; border-radius:6px; cursor:pointer; font-size:12px; flex-shrink:0; }
.block { background:#ff4d4d; color:white; }
.rename { background:#4da6ff; color:white; }
.remove { background:#555; color:white; }

/* ریسپانسیو */
@media (max-width:480px) {
  .device-header { flex-direction:column; align-items:flex-start; }
  .actions { flex-wrap:wrap; margin-top:4px; }
}

/* تم‌ها */
body[data-theme="light"] {
  --bg-color: #f4f4f4;
  --text-color: #333;
  --card-bg: #fff;
  --border-color: #ddd;
  --success-color: #4caf50;
}

body[data-theme="dark"] {
  --bg-color: #333;
  --text-color: #f2f2f2;
  --card-bg: #444;
  --border-color: #555;
  --success-color: #2ecc71;
}

.device-speed { color: var(--success-color); }
</style>
</head>
<body>
<header>
  <div class="title">Tenda Router</div>
  <div style="display:flex; align-items:center; gap:10px;">
    <div class="menu-toggle" id="menuToggleBtn">☰</div>
    <div class="theme-toggle" id="menuThemeToggle">🌙</div>
  </div>
</header>

<nav id="mainMenu">
  <ul>
    <li>📊 <a href="index.html.html">Status</a></li>
    <li>🌐 <a href="internet.html">Internet</a></li>
    <li>📶 Wireless</li>
    <li>📈 <a href="#">Bandwidth</a></li> 
    <li>🔁 Repeating</li>
    <li>👨‍👩‍👧 Parental</li>
    <li>⚙️ Advanced</li>
    <li>🔒 Security</li>
    <li>🛠 Admin</li>
  </ul>
</nav>

<div class="container">
  <div class="device-count" id="deviceCount"></div>

  <div class="box" id="connectedBox">
    <h3>Connected Devices</h3>
    <div id="connectedDevices"></div>
  </div>

  <div class="box" id="blockedBox">
    <h3>Blocked Devices</h3>
    <div id="blockedDevices"></div>
  </div>
</div>

<script>
const connectedDevicesEl = document.getElementById("connectedDevices");
const blockedDevicesEl = document.getElementById("blockedDevices");
const deviceCountEl = document.getElementById("deviceCount");

// Menu toggle
const menuToggleBtn = document.getElementById("menuToggleBtn");
const mainMenu = document.getElementById("mainMenu");
menuToggleBtn.addEventListener("click", ()=>{
  mainMenu.classList.toggle("active");
});

// Helper functions
function randomIP(){ return `${Math.floor(Math.random()*256)}.${Math.floor(Math.random()*256)}.${Math.floor(Math.random()*256)}.${Math.floor(Math.random()*256)}`; }
function randomUsage(){ const b=Math.floor(Math.random()*(2000-200+1)+200); return b<1000?b+" KB":(b/1000).toFixed(2)+" MB"; }
function randomSpeed(){ return `${Math.floor(Math.random()*100)+1} Mbps`; }

// Initial devices
let connectedDevices = [
  {name:"IPHONE X", ip:randomIP()},
  {name:"IPHONE 8", ip:randomIP()},
  {name:"IPHONE 8", ip:randomIP()},
  {name:"IPHONE 7", ip:randomIP()},
  {name:"HAWAWI", ip:randomIP()},
  {name:"A 23 SAMSUNG", ip:randomIP()},
  {name:"SAMSUNG", ip:randomIP()},
  {name:"IPHONE 11", ip:randomIP()},
  {name:"IPHONE 11 PRO MAX", ip:randomIP()},
  {name:"IPHOEN 13 PRO", ip:randomIP()},
  {name:"LG K", ip:randomIP()},
  {name:"INFINIX", ip:randomIP()}
];
let blockedDevices = [];

// Render functions
function renderDevices(){
  connectedDevicesEl.innerHTML="";
  connectedDevices.forEach((device,index)=>{
    const div=document.createElement("div"); div.className="device";

    const header=document.createElement("div"); header.className="device-header";

    const nameSpan=document.createElement("span"); nameSpan.className="device-name"; nameSpan.textContent=device.name;

    const usageSpan=document.createElement("span"); usageSpan.textContent=`Usage: ${randomUsage()} | Speed: ${randomSpeed()}`;

    const actionSpan=document.createElement("span"); actionSpan.className="actions";
    actionSpan.innerHTML=`<button class="block" onclick="blockDevice(${index})">Block</button><button class="rename" onclick="renameDevice(${index})">Rename</button>`;

    header.appendChild(nameSpan); header.appendChild(usageSpan); header.appendChild(actionSpan);

    const ipDiv=document.createElement("div"); ipDiv.className="device-ip"; ipDiv.textContent=`IP: ${device.ip}`;

    div.appendChild(header); div.appendChild(ipDiv);
    connectedDevicesEl.appendChild(div);
  });
  deviceCountEl.textContent=`Total Connected Devices: ${connectedDevices.length}`;
}

function renderBlocked(){
  blockedDevicesEl.innerHTML="";
  blockedDevices.forEach((device,index)=>{
    const div=document.createElement("div"); div.className="device";

    const header=document.createElement("div"); header.className="device-header";

    const nameSpan=document.createElement("span"); nameSpan.className="device-name"; nameSpan.textContent="🚫 "+device.name;

    const actionSpan=document.createElement("span"); actionSpan.className="actions";
    actionSpan.innerHTML=`<button class="remove" onclick="removeBlocked(${index})">Remove</button>`;

    header.appendChild(nameSpan); header.appendChild(actionSpan);
    div.appendChild(header); blockedDevicesEl.appendChild(div);
  });
}

// Actions
function blockDevice(i){ blockedDevices.push(connectedDevices[i]); connectedDevices.splice(i,1); renderDevices(); renderBlocked(); }
function removeBlocked(i){ connectedDevices.push(blockedDevices[i]); blockedDevices.splice(i,1); renderDevices(); renderBlocked(); }
function renameDevice(i){ const newName=prompt("Enter new device name:", connectedDevices[i].name); if(newName){ connectedDevices[i].name=newName; renderDevices(); } }

// Initial render and periodic refresh
renderDevices();
renderBlocked();
setInterval(renderDevices,5000); // Update usage & speed every 5s

// Theme toggle
const menuThemeToggle = document.getElementById('menuThemeToggle');
const body = document.body;

// بررسی تم ذخیره‌شده
const savedTheme = localStorage.getItem('siteTheme');
if(savedTheme){
  body.setAttribute('data-theme', savedTheme);
  menuThemeToggle.textContent = savedTheme === 'light' ? '🌙' : '☀️';
} else {
  body.setAttribute('data-theme', 'light');
}

// تغییر تم با کلیک
menuThemeToggle.addEventListener('click', () => {
  const currentTheme = body.getAttribute('data-theme') || 'light';
  const newTheme = currentTheme === 'light' ? 'dark' : 'light';
  body.setAttribute('data-theme', newTheme);
  menuThemeToggle.textContent = newTheme === 'light' ? '🌙' : '☀️';
  localStorage.setItem('siteTheme', newTheme);
});
</script>
</body>
</html>
